{% extends 'base.html' %}
{% block content %}
<!-- Edit User Modal -->
<div class="modal fade" id="editUserModal" tabindex="-1" role="dialog" aria-labelledby="editUserModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editUserModalLabel">Edit User Details</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="editUserForm" method="post" enctype="multipart/form-data">
                    {% csrf_token %}
                    <input type="hidden" id="editUserID" name="editUserID" value="">
                    <div class="form-group row">
                        <label class="col-sm-2 col-form-label">Full Name</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" required name="editFullName" id="editFullName"
                                placeholder="Enter your full name">
                            <span class="messages"></span>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-2 col-form-label">Profile Image</label>
                        <div class="col-sm-10">
                            <input type="file" class="form-control-file" name="editProfileImage" id="editProfileImage">
                            <span class="messages"></span>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-2 col-form-label">User Type</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" disabled name="editUserType" value="Normal User"
                                id="editUserType" placeholder="Enter your user type">
                            <span class="messages"></span>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-2 col-form-label">Number</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" name="editNumber" required id="editNumber"
                                placeholder="Enter your number">
                            <span class="messages"></span>
                        </div>
                    </div>

                    <div class="form-group row">
                        <label class="col-sm-2 col-form-label">Password</label>
                        <div class="col-sm-10">
                            <input type="password" class="form-control" name="editPassword" required id="editPassword"
                                placeholder="Enter your password">
                            <span class="messages"></span>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-2 col-form-label">Username</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" name="editUsername" required id="editUsername"
                                placeholder="Enter your username">
                            <span class="messages"></span>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="submit" class="btn btn-primary" form="editUserForm">Save changes</button>
            </div>
        </div>
    </div>
</div>
<div class="pcoded-inner-content">

    <div class="main-body">
        <div class="page-wrapper">

            <div class="page-body">

                <div class="card">
                    <div class="card-header">
                        <h5>DOM/Jquery</h5>
                        <span>Events assigned to the table can be exceptionally useful for user
                            interaction, however you must be aware that DataTables will add and
                            remove rows from the DOM as they are needed (i.e. when paging only
                            the visible elements are actually available in the DOM). As such,
                            this can lead to the odd hiccup when working with events.</span>
                    </div>
                    <div class="card-block">
                        <div class="table-responsive dt-responsive">
                            <table id="dom-jqry" class="table table-striped table-bordered nowrap">
                                <thead>
                                    <tr>
                                        <th width="10px">ID</th>
                                        <th>Full Name</th>
                                        <th>Profile Image</th>
                                        <th>User Type</th>
                                        <th>Number</th>
                                        <th>Passport</th>
                                        <th>Username</th>
                                        <th width="10px">action</th>
                                    </tr>
                                </thead>
                                <tbody>

                                    {% for user in allUsers %}
                                    <tr  >
                                        <td onclick='location.href="/scaned-user-info/{{user.id}}/"'>{{ user.id }}</td>
                                        <td onclick='location.href="/scaned-user-info/{{user.id}}/"' style="font-weight: bold;">{{ user.fullName }}</td>
                                        <td onclick='location.href="/scaned-user-info/{{user.id}}/"'>
                                            {%if user.profileImage %}
                                            <img src="{{ user.profileImage.url }}" alt="{{ user.fullName }}"
                                                width="100">
                                            {% endif %}
                                        </td>
                                        <td onclick='location.href="/scaned-user-info/{{user.id}}/"'>{{ user.userType }}</td>
                                        <td onclick='location.href="/scaned-user-info/{{user.id}}/"'>{{ user.number }}</td>
                                        <td onclick='location.href="/scaned-user-info/{{user.id}}/"'>{{ user.passportID }}</td>
                                        <td onclick='location.href="/scaned-user-info/{{user.id}}/"'>{{ user.username }}</td>
                                        <td>
                                            <a target="_blank" href='/admin/api/userprofile/{{user.id}}/change/' class="btn btn-primary btn-sm edit-user">Edit</a>
                                            <a target="_blank" href="/admin/api/userprofile/{{user.id}}/change/" class="btn btn-info btn-sm">Detail</a>
                                            <a target="_blank" href="/admin/api/userprofile/{{user.id}}/delete/" class="btn btn-danger btn-sm">Delete</a>
                                        </td>

                                    </tr>
                                    {% endfor %}
                                </tbody>
                                <tfoot>
                                    <tr>
                                        <th width="10px">ID</th>
                                        <th>Full Name</th>
                                        <th>Profile Image</th>
                                        <th>User Type</th>
                                        <th>Number</th>
                                        <th>Username</th>
                                        <th width="10px">action</th>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                </div>






            </div>

        </div>
    </div>

    <div id="styleSelector">
    </div>
</div>
<script>
    function showEditModal(id) {
        var editModal = $('#editUserModal');
        editModal.modal('show');
    }


</script>
{% endblock %}